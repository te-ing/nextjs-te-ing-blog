---
title: httpμ—μ„μ μ•μ „ν• ν†µμ‹ μ„ μ„ν• payload μ•”νΈν™”
description: HTTPλ¥Ό μ‚¬μ©ν•λ” Node.js, Reactμ—μ„ HTTPSλ¥Ό λ¨λ°©ν• λ΅μ§μ„ ν†µν•΄ λ³΄μ•μ„±μ„ λ†’μΈ κ°λ°κ³Όμ •
tags: [http]
---

> π’΅ ν„μ¬ κ°λ°μ¤‘μΈ λΈ”λ΅κ·Έ νμ΄μ§€μ—μ„ νμ›κ°€μ… κΈ°λ¥μ„ λ„£μΌλ ¤ ν•λ”λ°, μ•„μ§ HTTPSλ¥Ό μ‚¬μ©ν•μ§€ μ•μ•„ payloadμ—μ„ μ¤‘μ”μ •λ³΄λ“¤μ΄ κ·Έλ€λ΅ λ…Έμ¶λ  μ λ°–μ— μ—†μ—λ‹¤.
> λ”°λΌμ„ HTTPSλ¥Ό λ¨λ°©ν• μ•„λμ™€ κ°™μ€ λ΅μ§μ„ ν†µν•΄ λ³΄μ•μ„±μ„ λ†’μ΄λ ¤ ν•μ€λ‹¤.

1. λ΅κ·ΈμΈ μ‹λ„ μ‹ λΉ„λ€μΉ­ν‚¤ μ•”νΈν™”ν‚¤λ¥Ό λ°›λ”λ‹¤.
2. ν•΄λ‹Ή μ•”νΈν‚¤λ΅ μ¤‘μ”ν• μ •λ³΄(ν¨μ¤μ›λ“)λ¥Ό μ•”νΈν™”ν•λ‹¤.
3. μ•”νΈν™”λ payloadλ¥Ό μ„λ²„λ΅ λ³΄λ‚Έλ‹¤.
4. μ„λ²„λ” μ•”νΈν™”λ¥Ό λ³µνΈν™”ν•μ—¬ μ•„μ΄λ””μ™€ λΉ„λ°€λ²νΈλ¥Ό ν™•μΈν•λ‹¤.
5. μ•„μ΄λ””μ™€ λΉ„λ°€λ²νΈλ¥Ό κ²€μ¦ν• ν›„ λ€μΉ­ν‚¤λ΅ μ•”νΈν™” ν• ν† ν°κ³Ό λ¦¬ν”„λ μ‰¬ ν† ν°μ„ λ³΄λ‚Έλ‹¤.
6. ν•΄λ‹Ή ν† ν°μ„ ν†µν•΄ μ„λ²„μ™€ μ£Όκ³  λ°›λ”λ‹¤.

<br >

## μ‚¬μ „μ§€μ‹

### HTTPS

HTTPλ” μ•”νΈν™”λμ§€ μ•μ€ ν†µμ‹ μ΄λ©°, λ³€μ΅° κ°€λ¥ν•κ³  ν†µμ‹  μƒλ€λ¥Ό ν™•μΈν•μ§€ μ•μ•„ μ„ν—ν•λ‹¤. λ³΄ν†µ μ΄λ¥Ό λ³΄μ™„ν•κΈ° μ„ν•΄ SSL μΈμ¦μ„λ¥Ό μ΄μ©ν• HTTPS ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•λ”λ°, HTTPSλ” μ•”νΈν™”μ™€ λ³µνΈν™”λ¥Ό ν•  μ μλ” μ„λ΅ λ‹¤λ¥Έ ν‚¤(κ³µκ°ν‚¤, κ°μΈν‚¤)λ¥Ό μ΄μ©ν• μ•”νΈν™” λ°©λ²•μ΄λ‹¤.
μ‚¬μ©μμ λ°μ΄ν„°λ¥Ό κ³µκ°ν‚¤λ΅ μ•”νΈν™” ν• ν›„ μ„λ²„λ΅ μ „μ†΅ν•λ”λ°, μ΄ κ³Όμ •μ—μ„ λ°μ΄ν„°λ¥Ό κ°€λ΅μ±„λ„ κ°μΈν‚¤κ°€ μ—†λ‹¤λ©΄ λ³µνΈν™”λ¥Ό ν•  μ μ—†λ‹¤. μ „μ†΅λ°›μΌλ ¤λ” μ„λ²„λ” κ°μΈν‚¤λ¥Ό ν†µν•΄ λ³µνΈν™”ν•μ—¬ μ”μ²­μ„ μ²λ¦¬ν•λ‹¤.

**HTTPS ν†µμ‹ κ³Όμ •**

μ„λ²„μ κ³µκ°ν‚¤κ°€ λ‹΄κΈ΄ μ•”νΈν™”λ SSL μΈμ¦μ„λ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚΄λ©΄ λΈλΌμ°μ €λ” λ‚΄μ¥λ CA κ³µκ°ν‚¤λ΅ μ•”νΈν™”λ μΈμ¦μ„λ¥Ό λ³µνΈν™”ν•μ—¬ μΈμ¦μ„κ°€ λ―Ώμ„λ§ ν•μ§€ ν™•μΈν•κ³  μ„λ²„μ κ³µκ°ν‚¤λ¥Ό νλ“ν•λ‹¤.

λΈλΌμ°μ €λ” κ³µκ°ν‚¤λ΅ λ€μΉ­ν‚¤λ¥Ό μ•”νΈν™”ν•μ—¬ μ„λ²„λ΅ μ „μ†΅ν•κ³ , μ„λ²„λ” μ„λ²„μ λΉ„λ°€ν‚¤λ΅ μ΄ κ°’μ„ λ³µνΈν™”ν•μ—¬ μ—°κ²°μ— μ‚¬μ©ν•λ” κ³ μ ν• μ„Έμ…ν‚¤λ¥Ό μƒμ„±ν•λ‹¤.

μ΄λ ‡κ² λ§λ“¤μ–΄μ§„ μ„Έμ…ν‚¤λ΅ λΈλΌμ°μ € κ°„ λ€μΉ­ν‚¤ μ•”νΈν™” ν†µμ‹ μ„ μ§„ν–‰ν•κ³ , HTTPS ν†µμ‹ μ΄ μ™„λ£λλ” μ‹μ μ—μ„ μ„λ΅ κ³µμ λ μ„Έμ… ν‚¤λ¥Ό νκΈ°ν•λ‹¤.

### λΉ„λ€μΉ­ν‚¤ μ•”νΈν™”

μ•”νΈλ΅ λ§λ“¤μ–΄μ£Όλ” μ•”νΈν‚¤μ™€ μ•”νΈλ¥Ό ν’€μ–΄μ£Όλ” λ³µνΈν™”ν‚¤κ°€ μμ„ λ•, λΉ„λ€μΉ­ν‚¤ μ•”νΈν™”λ” μ•”νΈν‚¤μ™€ λ³µνΈν™”ν‚¤κ°€ λ‹¤λ¥Έ μ•”νΈν™” λ°©μ‹μ΄λ‹¤. μ•”νΈν™”μ™€ λ³µνΈν™”λ¥Ό ν•λ‚μ ν‚¤λ΅ μ‚¬μ©ν•λ” λ€μΉ­ν‚¤μ™€ λ‹¬λ¦¬, λΉ„λ€μΉ­ν‚¤λ” μ•”νΈν™”μ™€ λ³µνΈν™”ν‚¤κ°€ λ‹¤λ¥΄κΈ° λ•λ¬Έμ— μ•”νΈν™”ν‚¤κ°€ μ μ¶λμ–΄λ„ μ•”νΈν™”λ κ°’μ΄ μ μ¶λμ§€ μ•λ”λ‹¤.

### λ‹¨λ°©ν–¥ μ•”νΈν™”

λ‹¨λ°©ν–¥ μ•”νΈν™”λ” μ•”νΈλ΅ λ§λ“¤μ–΄μ£Όλ” μ•”νΈν‚¤κ°€ μ΅΄μ¬ν•μ§€λ§, μ•”νΈλ¥Ό ν’€μ–΄μ£Όλ” λ³µνΈν™”ν‚¤κ°€ μ΅΄μ¬ν•μ§€ μ•λ” μ•”νΈν™” λ°©μ‹μ΄λ‹¤. λ”°λΌμ„ μ–΄λ–¤ κ°’μΈμ§€ νμ•…ν•  ν•„μ”μ—†μ΄ ν•΄λ‹Ή κ°’μ΄ μ΅΄μ¬ν•λ”μ§€ ν™•μΈν•  λ• μ‚¬μ©λλ‹¤.

2011λ…„ μ΄μ „κΉμ§€ κ¶μ¥ ν•΄μ‹ ν‘μ¤€μ΄λ SHA-1μ€ μ•”νΈν™” μ•κ³ λ¦¬μ¦μ€ μ¤‘κ°„μ— λ°μ΄ν„°λ¥Ό κ°€λ΅μ±„ νμΌμ„ μ„λ³€μ΅° ν•  μ μλ” λ³΄μ•μ·¨μ•½μ μ΄ λ°κ²¬λμ–΄ ν„μ¬ μ‚¬μ©λμ§€ μ•μΌλ©° μ§€μ–‘ν•΄μ•Ό ν•λ‹¤.

<br >

## Node.js(μ„λ²„)μ—μ„ λΉ„λ€μΉ­ν‚¤(RSA)λ¥Ό μ΄μ©ν• μ•”νΈν™” κΈ°λ¥ κµ¬ν„

```tsx
import crypto, { createPrivateKey, createPublicKey } from 'crypto';
import bcrypt from 'bcryptjs';

const privateKey = createPrivateKey(
  process.env.RSA_PRIVATE_KEY.replace(/\\n/g, '\n')
);
const publicKey = createPublicKey(
  process.env.RSA_PUBLIC_KEY.replace(/\\n/g, '\n')
);

export const encodeRSA = (text: string) => {
  const buffer = Buffer.from(text);
  const encrypted = crypto.publicEncrypt(publicKey, buffer);
  return encrypted.toString('hex');
};

export const decodeRSA = (text: string) => {
  const buffer = Buffer.from(text, 'hex');
  const decrypted = crypto.privateDecrypt(privateKey, buffer);
  return decrypted.toString('utf8');
};

export const encodeHash = (text: string, saltLength = 10) => {
  const salt = bcrypt.genSaltSync(saltLength);
  const hashedText = bcrypt.hashSync(text, salt);
  return hashedText;
};
```

**[Oline RSA Key Generator](https://travistidwell.com/jsencrypt/demo/) μ—μ„ RSAν‚¤λ¥Ό μƒμ„±ν• ν›„,** crypto, bcryptjsλ¥Ό μ΄μ©ν•μ—¬ λΉ„λ€μΉ­ν‚¤ μ•”νΈν™” κΈ°λ¥μ„ κµ¬ν„ν•μ€λ‹¤. cryptoλ” nodeμ— λ‚΄μ¥λμ–΄ μλ” κΈ°λ¥μ΄μ§€λ§ bcryptjsλ” λ³„λ„λ΅ μ„¤μΉν•μ—¬μ•Ό ν•λ‹¤.`$ npm i bcryptjs`(νƒ€μ…μ¤ν¬λ¦½νΈ`npm i -D @types/bcryptjs`)

λν• λΉ„λ°€λ²νΈλ¥Ό λ‹¨λ°©ν–¥ μ•”νΈν™”ν•κΈ° μ„ν•΄ encodeHash ν•¨μλ΅ λ§λ“¤μ—λ”λ°, λ§μ•½μ— λ°μ΄ν„°λ² μ΄μ¤κ°€ ν•΄μ»¤μ—κ² ν„Έλ¦¬λ”λΌλ„, μ›λμ λΉ„λ°€λ²νΈ κ°’μ„ μ• μ μ—†κΈ°ν•κΈ° μ„ν•¨μ΄λ‹¤. μ”μƒ μ‚¬μ΄νΈμ—μ„ λΉ„λ°€λ²νΈ μ°ΎκΈ°λ¥Ό ν•λ©΄ κΈ°μ΅΄ λΉ„λ°€λ²νΈλ¥Ό μ•λ ¤μ£Όλ” κ²ƒμ΄ μ•„λ‹ μƒλ΅μ΄ λΉ„λ°€λ²νΈ κ°’μ„ μ…λ ¥ν•λΌκ³  ν•λ”λ°, λΉ„λ°€λ²νΈλ¥Ό λ‹¨λ°©ν–¥ μ•”νΈν™”ν•΄μ„ μ €μ¥ν•κΈ° λ•λ¬Έμ΄λ‹¤.

<br >

## React(ν΄λΌμ΄μ–ΈνΈ)μ—μ„ λΉ„λ€μΉ­ν‚¤(RSA)λ¥Ό μ΄μ©ν• μ•”νΈν™” κΈ°λ¥ κµ¬ν„

```tsx
import { getPublicKey } from 'api/auth.api';
import { publicEncrypt } from 'crypto';

export const rsaEncode = async (text: string): Promise<string> => {
  const publicKey = await getPublicKey();
  const buffer = Buffer.from(text);
  const encodedText = publicEncrypt(publicKey, buffer).toString('hex');
  return encodedText;
};
```

λ¦¬μ•΅νΈμ—μ„λ” crypto λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•μ—¬ λΉ„λ€μΉ­ μ•”νΈν™” κΈ°λ¥μ„ κµ¬ν„ν–λ‹¤. ν΄λΌμ΄μ–ΈνΈμ—μ„λ” cryptoκ°€ λ‚΄μ¥λμ–΄μμ§€ μ•μΌλ―€λ΅ crypto-jsμ™€ κ°™μ€ λ³„λ„μ λΌμ΄λΈλ¬λ¦¬λ¥Ό μ„¤μΉν•΄μ¤μ•Ό ν•λ‹¤. `$ npm i crypto-js`(νƒ€μ…μ¤ν¬λ¦½νΈ`npm i -D @types/crypto-js`)

λν• μ•”νΈν‚¤λ” μ–Έμ λ“  λ³€λ™λ  μ μμ–΄μ•Ό ν•κΈ° λ•λ¬Έμ— μ•”νΈν™” ν•  λ• λ§λ‹¤ `getPublicKey API`λ¥Ό ν†µν•΄ μ„λ²„μ—μ„ λ°›μ•„μ¤λ„λ΅ κµ¬ν„ν•μ€λ‹¤.

<br >

## κµ¬ν„ κ²°κ³Ό

![](https://velog.velcdn.com/images/te-ing/post/bbd9ad25-9364-4156-b985-f327d5916907/image.jpg)

API ν†µμ‹ μ‹ λ³΄λ‚΄λ” passwordλ” RSAλ΅ μ•”νΈν™”λμ–΄ λ³΄λ‚΄μ§€κ³  μκ³ , λ°μ΄ν„°λ² μ΄μ¤μ—λ” ν•΄μ‹κ°’μΌλ΅ λ‹¨λ°©ν–¥ μ•”νΈν™”λμ–΄ λ³΄κ΄€λμ–΄ μλ‹¤. λ΅κ·ΈμΈ μ‹μ—λ” RSA λ³µνΈν™”λ¥Ό ν†µν•΄ ν•΄μ‹κ°’μΌλ΅ λ³€ν™ν• ν›„, bcrypt λΌμ΄λΈλ¬λ¦¬λ΅ λ°μ΄ν„°λ² μ΄μ¤μ λΉ„λ°€λ²νΈμ™€ μΌμΉν•λ”μ§€ ν™•μΈν•μ—¬ λ΅κ·ΈμΈ μ„±κ³µ μ—¬λ¶€λ¥Ό λ°ν™ν•λ‹¤.

λ”°λΌμ„ μ„λ²„μ λ³µνΈν™”ν‚¤κ°€ μ μ¶λμ§€ μ•λ”λ‹¤λ©΄ μ μ €μ λΉ„λ°€λ²νΈλ” μ• μ μ—†κ³ , λ³µνΈν™”ν‚¤κ°€ μ μ¶λλ”λΌλ„ ν•΄λ‹Ή μ‚¬μ΄νΈ μ™Έμ—λ” μ μ €μ λΉ„λ°€λ²νΈλ¥Ό μ‚¬μ©ν•  μ μ—†λ„λ΅ ν•μ—¬ μƒλ€μ μΌλ΅ μ•μ „ν• λ΅κ·ΈμΈμ„ κµ¬ν„ν•μ€λ‹¤.

<br>

---

μ°Έκ³ μ‚¬μ΄νΈ: https://charming-kyu.tistory.com/9
